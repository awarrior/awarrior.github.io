<!DOCTYPE html>
<html id="J-html" class="">
<head>
    <meta charset="UTF-8" />
    <title>
        
            Maximum Continuous Subset
        
    </title>
    <meta name="generator" content="Jekyll" />
    <meta name="author" content="Awarrior" />
    <meta name="description" content="" />
    <meta name="keywords" content="" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" media="all" href="http://awarrior.github.io/static/style.css" />
    <link rel="stylesheet" type="text/css" media="all" href="http://awarrior.github.io/static/pygments.css" />
    <!--[if lt IE 9]>
    <script src="http://awarrior.github.io/static/js/html5.js" type="text/javascript"></script>
    <![endif]-->
    <script src="http://awarrior.github.io/static/js/jquery.js" type="text/javascript"></script>
</head>
<body itemscope itemtype="http://schema.org/WebPage" class="home blog lotus index">
    <nav class="lotus-nav">
        <ul>
            
            
            
            
            
                
            
            <li class="home ">
                <a href="/index.html" rel="bookmark" title="Home">
                    <i class="icon-home"></i>
                </a>
                
            </li>
            
            
            
            
            
            <li class="">
                <a href="/categories.html" rel="bookmark" title="Categories">
                    <i class="icon-tags"></i>
                </a>
                
            </li>
            
            
            
            
            
            <li class="">
                <a href="/archives.html" rel="bookmark" title="Archives">
                    <i class="icon-reorder"></i>
                </a>
                
            </li>
            
            
            
            
            
            <li class="">
                <a href="/links.html" rel="bookmark" title="Links">
                    <i class="icon-heart"></i>
                </a>
                
            </li>
            
            
            
            
            
            <li class="">
                <a href="/contact.html" rel="bookmark" title="Author">
                    <i class="icon-user"></i>
                </a>
                
            </li>
            
        </ul>
    </nav>

    <p class="lotus-breadcrub">
    <a href="http://awarrior.github.io/index.html" rel="nofollow" rel="nofollow" title="home">Home</a>
    <span> &gt; </span>
    <!-- <a href="http://awarrior.github.io/archives.html" rel="nofollow" >Archives</a>
    <span> &gt; </span>
    Maximum Continuous Subset -->
    Post
</p>
<h1 class="lotus-pagetit">Maximum Continuous Subset</h1>
<p class="lotus-meta">Category: ISSUE &nbsp;|&nbsp;  Publish: <time class="date" pubdate="December  3, 2014">December  3, 2014</time></p>
<article  itemscope itemtype="http://schema.org/Article" class="lotus-post">
<h3 id="describe">Describe</h3>

<p>There is one integer array and you must find out one subset that contains the maximum continuous numbers with time complexity O(n). </p>

<p>E.g. imput-&gt; <code>15, 7, 12, 6, 14, 13, 9, 11</code></p>

<p>output-&gt; <code>5: [11, 12, 13, 14, 15]</code></p>

<h3 id="resolve">Resolve</h3>

<ol>
  <li>
    <p>One intuitive way is to use <em>Disjoint Set</em> which is a structure for unioning or searching element in set. The time complexity is O(n).</p>
  </li>
  <li>
    <p>The second way is to maintain the information of continuous numbers set using a starting number and an offset. See code logic for more details.</p>
  </li>
  <li>
    <p>The simplest way is to use bitset to count the numbers and then find out the longest set. Bitset is good at saving memory although it may be hard to define the length sometimes in this question.</p>
  </li>
</ol>

<h3 id="code">Code</h3>

<p>the 1st algorithm</p>

<pre><code>#include &lt;iostream&gt;
#include &lt;unordered_map&gt;
using std::cout;
using std::endl;
using std::unordered_map;

int data[] = {15, 7, 12, 6, 14, 13, 9, 11};
unordered_map&lt;int,int&gt; parent;
unordered_map&lt;int,int&gt; rank;
unordered_map&lt;int,int&gt; cnt;
int max, val;

int findParent(int x) {
	if (x != parent[x])
		parent[x] = findParent(parent[x]);
	return parent[x];
}

void unionSet(int x, int y) {
	int a = findParent(x);
	int b = findParent(y);
	if (a != b) {
		if (rank[a] &lt; rank[b]) {
			parent[a] = b;
			cnt[b]+=cnt[b];
			max = max&lt;cnt[b]?cnt[b]:max;
			val = b;
		} else {
			parent[b] = a;
			cnt[a]+=cnt[b];
			max = max&lt;cnt[a]?cnt[a]:max;
			val = a;
			if (rank[a] == rank[b])
				++rank[a];
		}
	}
}

int main() {
	for (auto d : data) {
		if (parent.find(d)!=parent.cend())
			continue;
		parent[d] = d;
		rank[d] = 0;
		cnt[d] = 1;
		if (parent.find(d-1)!=parent.cend())
			unionSet(d-1, d);
		if (parent.find(d+1)!=parent.cend())
			unionSet(d+1, d);
	}
	cout&lt;&lt;max&lt;&lt;":";
	for (auto c : cnt)
		if (findParent(c.first) == val)
			cout&lt;&lt;' '&lt;&lt;c.first;
	cout&lt;&lt;endl;
	return 0;
}
</code></pre>

<p>the 2nd algorithm</p>

<pre><code>#include &lt;iostream&gt;
#include &lt;unordered_map&gt;
using std::cout;
using std::endl;
using std::unordered_map;

int data[] = {15, 7, 12, 6, 14, 13, 9, 11};
unordered_map&lt;int,int&gt; um;
int max;
int val;

int main() {
	for (auto d : data) {
		if (um.find(d)!=um.cend())
			continue;
		um[d] = 1;
		if (um.find(d-1)!=um.cend()) {
			um[d] += um[d-1];
			um[d-um[d-1]] = um[d];
			
			if (max &lt; um[d]) {
				max = um[d];
				val = d-um[d-1];
			}
		}
		if (um.find(d+1)!=um.cend()) {
			int idx = d;
			if (um.find(d-1)!=um.cend())
				idx = d-um[d]+1;

			um[d] += um[d+1];
			um[d+um[d+1]] = um[d];
			um[idx] = um[d];

			if (max &lt; um[d]) {
				max = um[d];
				val = idx;
			}
		}
	}

	cout&lt;&lt;max&lt;&lt;":";
	for (int i=0; i&lt;max; ++i)
		cout&lt;&lt;" "&lt;&lt;val+i;
	cout&lt;&lt;endl;
	return 0;
}
</code></pre>

<p>the 3th algorithm</p>

<pre><code>#include &lt;iostream&gt;
#include &lt;bitset&gt;
#define N 20
using std::cout;
using std::endl;
using std::bitset;

int data[] = {15, 7, 12, 6, 14, 13, 9, 11};
bitset&lt;N&gt; bs;
int max;
int val;

int main() {
	for (auto d : data) {
		if (bs.test(d))
			continue;
		bs.set(d);
	}
	int cnt = 0;
	int beg = -1;
	for (int i=0; i&lt;bs.size(); ++i) {
		if (bs.test(i)) {
			if (beg == -1) {
				beg = i;
			}
			++cnt;
		} else if (beg != -1) {
			if (max &lt; cnt) {
				max = cnt;
				val = beg;
			}
			cnt = 0;
			beg = -1;
		}
	}

	cout&lt;&lt;max&lt;&lt;":";
	for (int i=0; i&lt;max; ++i)
		cout&lt;&lt;" "&lt;&lt;val+i;
	cout&lt;&lt;endl;
	return 0;
}
</code></pre>


</article>
<p class="lotus-anno">Notice: this article use <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/" rel="nofollow" target="_blank" title="CC">BY-NC-SA</a> license. Please specify the source: <a href="" title="" rel="nofollow">Awarrior</a></p>
<section class="lotus-nextpage fn-clear">
    
    <div class="lotus-nextpage-left"><a class="prev" href="/majority-vote" rel="prev">&laquo;&nbsp;Majority Vote</a></div>
    
    
    <div class="lotus-nextpage-right"><a class="next" href="/reservoir-sampling" rel="next">Reservoir Sampling&nbsp;&raquo;</a></div>
    
</section>


<script src="http://awarrior.github.io/static/js/jquery.scrollTo.js" type="text/javascript"></script>
<script src="http://awarrior.github.io/static/js/iLotus.js" type="text/javascript"></script>
</body>
</html>
